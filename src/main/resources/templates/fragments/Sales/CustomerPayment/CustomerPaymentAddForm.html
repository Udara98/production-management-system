<div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Add New Customer Payment</h5>
            <button class="btn-close" data-bs-dismiss="modal" type="button"></button>
        </div>
        <div class="modal-body">
           <form id="CPAddForm" class="needs-validation">
               <div class="row mt-2">
                   <div class="col">
                       <label class="form-label fw-medium" for="add-cp-customer">Customer<span class="text-danger"> * </span></label>
                       <select id="add-cp-customer" class="form-select" required>
                           <option  selected disabled>Select Customer</option>
                       </select>
                       <div class="invalid-feedback">Please select a Customer.</div>
                   </div>
               </div>
               <div class="alert alert-warning text-center mt-3" id="noUnpaidOrdersAlert" style="display: none;">
                Customer does not have any unpaid orders
                </div>
               <div class="row mt-3" id="customer-orders-section" style="display:none;">
                   <div class="col-12">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <label class="form-label fw-medium">Unpaid Orders</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="payAllOutstandingCheckbox">
                                <label class="form-check-label" for="payAllOutstandingCheckbox">
                                    Pay All Outstanding
                                </label>
                            </div>
                        </div>
                        <table class="table table-bordered" id="customerOrderPaymentTable">
                            <thead>
                           <tr>
                               <th>Select</th>
                               <th>Order No</th>
                               <th>Invoice No</th>
                               <th>Outstanding</th>
                               <th>Pay Amount</th>
                               <th>Balance</th>
                           </tr>
                           </thead>
                           <tbody>
                           <!-- Populated by JS after customer select -->
                           </tbody>
                       </table>
                    </div>

                    <!-- Totals Section -->
                    <div class="row mt-4" id="totalsSection">
                        <div class="col">
                            <label class="form-label fw-medium">Total Payable (LKR)</label>
                            <input type="text" class="form-control" id="totalPayable" disabled>
                        </div>
                        <div class="col">
                            <label class="form-label fw-medium">Total Paid (LKR)</label>
                            <input type="text" class="form-control" id="totalPaid" disabled>
                            <div class="invalid-feedback">Need to Enter pay Amount to at least one above field </div>
                        </div>
                        <div class="col">
                            <label class="form-label fw-medium">Remaining Balance (LKR)</label>
                            <input type="text" class="form-control" id="remainingBalance" disabled>
                        </div>
                    </div>
               </div>
               <div class="row mt-4" id="paymentMethodRow">
                   <div class="col">
                       <label class="form-label fw-medium" for="add-cp-payMeth">Payment Method<span class="text-danger"> * </span></label>
                       <select id="add-cp-payMeth" name="paymentMethod" class="form-select" required onchange="showPaymentOptionByMethod();">
                           <option disabled selected value="">Select Payment Method</option>
                           <option value="VISA_CARD">VISA CARD</option>
                           <option value="MASTER_CARD">MASTER CARD</option>
                           <option value="BANK_TRANSFER">BANK TRANSFER</option>
                           <option value="CASH">CASH</option>
                           <option value="CHEQUE">CHEQUE</option>
                        </select>
                        <div class="invalid-feedback">Please select a Payment Method.</div>
                   </div>

<div class="col">
    <label class="form-label fw-medium" for="add-cp-payStatus">Payment Status<span class="text-danger"> * </span></label>
    <select id="add-cp-payStatus" name="paymentStatus" class="form-select" required>
        <option value="Pending" selected>Pending</option>
        <option value="Completed">Completed</option>
        <option value="OnHold">On Hold</option>
        <option value="Canceled">Canceled</option>
    </select>
</div>
<div class="col d-none" id="paymentDateRow">
    <label class="form-label fw-medium" for="add-cp-payDate">Payment Date<span class="text-danger"> * </span></label>
    <input class="form-control" id="add-cp-payDate" type="date" required onkeydown="return false" />
    <div class="valid-feedback"></div>
    <div class="invalid-feedback">Please enter a valid payment date.</div>
</div>
</div>
               
<!--               Bank Transfer Card-->
               <div class="row mt-3 mb-4 d-none" id="bankTranferDivRow">
                   <div class="col-12">
                       <div class="card">
                           <div class="card-header">
                               <b>Bank Transfer</b>
                           </div>
                           <div class="card-body">
                               <div class="row">
                                   <div class="col-6">
                                       <label class="form-label mb-0 fw-bold"
                                              style="font-size: 12.5px;" for="inputBankTranferId"><span
                                               style="color: #fa5252;">* </span>Transaction
                                           ID:</label>

                                       <div class="row">
                                           <div class="col-12">
                                               <input class="form-control" type="text"
                                                      id="inputBankTranferId"
                                                      style="background-color: #E6E6E6;" required>
                                                      <div class="invalid-feedback">Need to Enter valid Transaction ID</div>
                                           </div>
                                       </div>
                                   </div>

                                   <div class="col-6">
                                       <label class="form-label mb-0 fw-bold"
                                              style="font-size: 12.5px;"
                                              for="inputBankTransferredDateTime"><span
                                               style="color: #fa5252;">* </span>Transfer Date &
                                           Time:</label>

                                       <div class="row">
                                           <div class="col-12">
                                               <input class="form-control" type="date"
                                                      id="inputBankTransferredDateTime"
                                                      style="background-color: #E6E6E6;" required
                                                      onkeydown="return false">
                                                      <div class="invalid-feedback">Need to Enter valid Transfer Date & Time</div>
                                           </div>
                                       </div>
                                   </div>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>

<!--               Cheque Details card-->
               <div class="row mt-3 mb-4 d-none" id="chequeDivRow">
                   <div class="col-12">
                       <div class="card">
                           <div class="card-header">
                               <b>Cheque</b>
                           </div>
                           <div class="card-body">

                               <div class="row">
                                   <!-- * text cheque no  -->
                                   <div class="col-6">
                                       <label class="form-label mb-0 fw-bold"
                                              style="font-size: 12.5px;" for="inputChequeNo"><span
                                               style="color: #fa5252;">* </span>Cheque
                                           Number:</label>

                                       <div class="row">
                                           <div class="col-12">
                                               <input class="form-control" type="text"
                                                      id="inputChequeNo" style="background-color: #E6E6E6;"
                                                      required>
                                                      <div class="invalid-feedback">Need to Enter valid Cheque No</div>
                                           </div>
                                       </div>
                                   </div>
                                   <!-- * date cheque Date-->
                                   <div class="col-6">
                                       <label class="form-label mb-0 fw-bold"
                                              style="font-size: 12.5px;" for="inputChequeDate"><span
                                               style="color: #fa5252;">* </span>Cheque
                                           Date:</label>
                                       <div class="row">
                                           <div class="col-12">
                                               <input class="form-control" type="date"
                                                      id="inputChequeDate"
                                                      style="background-color: #E6E6E6;" required
                                                      onkeydown="return false">
                                                      <div class="invalid-feedback">Need to Enter valid Cheque Date</div>
                                           </div>
                                       </div>
                                   </div>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>
<!--               Card details Card div-->
               <div class="row mt-3 mb-4 d-none" id="cardDivRow">
                   <div class="col-12">
                       <div class="card">
                           <div class="card-header">
                               <b>Card Payment</b>
                           </div>
                           <div class="card-body">
                               <div class="row">
                                   <!-- * text Card  -->
                                   <div class="col-6">
                                       <label class="form-label mb-0 fw-bold"
                                              style="font-size: 12.5px;" for="inputCardRefNo"><span
                                               style="color: #fa5252;">* </span>Transaction ID</label>

                                       <div class="row">
                                           <div class="col-12">
                                               <input class="form-control" type="text"
                                                      id="inputCardRefNo" style="background-color: #E6E6E6;"
                                                      required>
                                                      <div class="invalid-feedback">Need to Enter valid Transaction ID</div>
                                           </div>
                                       </div>
                                   </div>
                                   <!-- * date checkDate-->
                                   <div class="col-6">
                                       <label class="form-label mb-0 fw-bold"
                                              style="font-size: 12.5px;" for="inputCardDate"><span
                                               style="color: #fa5252;">* </span>Transfer Date & Time</label>

                                       <div class="row">
                                           <div class="col-12">
                                               <input class="form-control" type="date"
                                                      id="inputCardDate"
                                                      style="background-color: #E6E6E6;" required
                                                      onkeydown="return false">
                                                      <div class="invalid-feedback">Need to Enter valid Transfer Date & Time</div>
                                           </div>
                                       </div>
                                   </div>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>
<!--               Note field-->
               <div class="row mt-4" id="paymentNoteRow">
                   <div class="col">
                       <div class="form-floating">
                                <textarea
                                        class="form-control"
                                        id="addCusPayNote"
                                        placeholder="Enter note"
                                ></textarea>
                           <label
                                   class="form-label fw-medium"
                                   for="addCusPayNote"
                           >
                               Note
                               <span class="text-cus-red">(optional)</span>
                           </label>
                       </div>
                   </div>
               </div>
               <hr>
               <div class="row mt-3 mb-2">
                   <div class="col-1">
                       <button
                               type="reset"
                               class="btn btn-outline-danger"
                       >
                           Clear
                       </button>
                   </div>
                   <div class="col-5"></div>
                   <div class="col-6 d-flex justify-content-end">
                       <!-- <button
                               class="btn cusbutton btn-update"
                               id="add-cp-update"
                               type="submit"
                       >
                           <i class="fa-solid fa-edit me-2"></i>Update
                       </button> -->
                       <button
                               class="btn  btn-submit me-0"
                               id="add-cp-submit"   
                               type="button"
                                                   >
                           <i class="fa-solid fa-plus me-2"></i>Add
                       </button>
                   </div>
               </div>
           </form>
        </div>

    </div>
</div>